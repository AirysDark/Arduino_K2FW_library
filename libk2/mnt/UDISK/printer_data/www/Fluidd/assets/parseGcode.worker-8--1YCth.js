var wr=Object.defineProperty;var Sr=(C,v,z)=>v in C?wr(C,v,{enumerable:!0,configurable:!0,writable:!0,value:z}):C[v]=z;var S=(C,v,z)=>Sr(C,typeof v!="symbol"?v+"":v,z);(function(){"use strict";const C=(t,e)=>t in e;var v=typeof global=="object"&&global&&global.Object===Object&&global,z=typeof self=="object"&&self&&self.Object===Object&&self,H=v||z||Function("return this")(),w=H.Symbol,tt=Object.prototype,yt=tt.hasOwnProperty,_t=tt.toString,L=w?w.toStringTag:void 0;function mt(t){var e=yt.call(t,L),r=t[L];try{t[L]=void 0;var n=!0}catch{}var o=_t.call(t);return n&&(e?t[L]=r:delete t[L]),o}var vt=Object.prototype,bt=vt.toString;function wt(t){return bt.call(t)}var St="[object Null]",Ct="[object Undefined]",et=w?w.toStringTag:void 0;function U(t){return t==null?t===void 0?Ct:St:et&&et in Object(t)?mt(t):wt(t)}function Q(t){return t!=null&&typeof t=="object"}var xt="[object Symbol]";function X(t){return typeof t=="symbol"||Q(t)&&U(t)==xt}function Tt(t,e){for(var r=-1,n=t==null?0:t.length,o=Array(n);++r<n;)o[r]=e(t[r],r,t);return o}var A=Array.isArray,rt=w?w.prototype:void 0,nt=rt?rt.toString:void 0;function ot(t){if(typeof t=="string")return t;if(A(t))return Tt(t,ot)+"";if(X(t))return nt?nt.call(t):"";var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function M(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}function Ot(t){return t}var Et="[object AsyncFunction]",zt="[object Function]",Pt="[object GeneratorFunction]",Lt="[object Proxy]";function At(t){if(!M(t))return!1;var e=U(t);return e==zt||e==Pt||e==Et||e==Lt}var q=H["__core-js_shared__"],st=function(){var t=/[^.]+$/.exec(q&&q.keys&&q.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function Ft(t){return!!st&&st in t}var It=Function.prototype,$t=It.toString;function Mt(t){if(t!=null){try{return $t.call(t)}catch{}try{return t+""}catch{}}return""}var jt=/[\\^$.*+?()[\]{}|]/g,Nt=/^\[object .+?Constructor\]$/,Rt=Function.prototype,Dt=Object.prototype,kt=Rt.toString,Gt=Dt.hasOwnProperty,Ht=RegExp("^"+kt.call(Gt).replace(jt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ut(t){if(!M(t)||Ft(t))return!1;var e=At(t)?Ht:Nt;return e.test(Mt(t))}function Qt(t,e){return t==null?void 0:t[e]}function B(t,e){var r=Qt(t,e);return Ut(r)?r:void 0}function Xt(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}var qt=800,Bt=16,Jt=Date.now;function Kt(t){var e=0,r=0;return function(){var n=Jt(),o=Bt-(n-r);if(r=n,o>0){if(++e>=qt)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Zt(t){return function(){return t}}var j=function(){try{var t=B(Object,"defineProperty");return t({},"",{}),t}catch{}}(),Yt=j?function(t,e){return j(t,"toString",{configurable:!0,enumerable:!1,value:Zt(e),writable:!0})}:Ot,Vt=Kt(Yt),Wt=9007199254740991,te=/^(?:0|[1-9]\d*)$/;function it(t,e){var r=typeof t;return e=e??Wt,!!e&&(r=="number"||r!="symbol"&&te.test(t))&&t>-1&&t%1==0&&t<e}function ee(t,e,r){e=="__proto__"&&j?j(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function at(t,e){return t===e||t!==t&&e!==e}var re=Object.prototype,ne=re.hasOwnProperty;function oe(t,e,r){var n=t[e];(!(ne.call(t,e)&&at(n,r))||r===void 0&&!(e in t))&&ee(t,e,r)}var lt=Math.max;function se(t,e,r){return e=lt(e===void 0?t.length-1:e,0),function(){for(var n=arguments,o=-1,s=lt(n.length-e,0),a=Array(s);++o<s;)a[o]=n[e+o];o=-1;for(var i=Array(e+1);++o<e;)i[o]=n[o];return i[e]=r(a),Xt(t,this,i)}}var ie=9007199254740991;function ae(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=ie}var le="[object Arguments]";function ct(t){return Q(t)&&U(t)==le}var ut=Object.prototype,ce=ut.hasOwnProperty,ue=ut.propertyIsEnumerable,ft=ct(function(){return arguments}())?ct:function(t){return Q(t)&&ce.call(t,"callee")&&!ue.call(t,"callee")},fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pe=/^\w*$/;function he(t,e){if(A(t))return!1;var r=typeof t;return r=="number"||r=="symbol"||r=="boolean"||t==null||X(t)?!0:pe.test(t)||!fe.test(t)||e!=null&&t in Object(e)}var F=B(Object,"create");function de(){this.__data__=F?F(null):{},this.size=0}function ge(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var ye="__lodash_hash_undefined__",_e=Object.prototype,me=_e.hasOwnProperty;function ve(t){var e=this.__data__;if(F){var r=e[t];return r===ye?void 0:r}return me.call(e,t)?e[t]:void 0}var be=Object.prototype,we=be.hasOwnProperty;function Se(t){var e=this.__data__;return F?e[t]!==void 0:we.call(e,t)}var Ce="__lodash_hash_undefined__";function xe(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=F&&e===void 0?Ce:e,this}function x(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}x.prototype.clear=de,x.prototype.delete=ge,x.prototype.get=ve,x.prototype.has=Se,x.prototype.set=xe;function Te(){this.__data__=[],this.size=0}function N(t,e){for(var r=t.length;r--;)if(at(t[r][0],e))return r;return-1}var Oe=Array.prototype,Ee=Oe.splice;function ze(t){var e=this.__data__,r=N(e,t);if(r<0)return!1;var n=e.length-1;return r==n?e.pop():Ee.call(e,r,1),--this.size,!0}function Pe(t){var e=this.__data__,r=N(e,t);return r<0?void 0:e[r][1]}function Le(t){return N(this.__data__,t)>-1}function Ae(t,e){var r=this.__data__,n=N(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function P(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}P.prototype.clear=Te,P.prototype.delete=ze,P.prototype.get=Pe,P.prototype.has=Le,P.prototype.set=Ae;var Fe=B(H,"Map");function Ie(){this.size=0,this.__data__={hash:new x,map:new(Fe||P),string:new x}}function $e(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function R(t,e){var r=t.__data__;return $e(e)?r[typeof e=="string"?"string":"hash"]:r.map}function Me(t){var e=R(this,t).delete(t);return this.size-=e?1:0,e}function je(t){return R(this,t).get(t)}function Ne(t){return R(this,t).has(t)}function Re(t,e){var r=R(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function T(t){var e=-1,r=t==null?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}T.prototype.clear=Ie,T.prototype.delete=Me,T.prototype.get=je,T.prototype.has=Ne,T.prototype.set=Re;var De="Expected a function";function J(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(De);var r=function(){var n=arguments,o=e?e.apply(this,n):n[0],s=r.cache;if(s.has(o))return s.get(o);var a=t.apply(this,n);return r.cache=s.set(o,a)||s,a};return r.cache=new(J.Cache||T),r}J.Cache=T;var ke=500;function Ge(t){var e=J(t,function(n){return r.size===ke&&r.clear(),n}),r=e.cache;return e}var He=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ue=/\\(\\)?/g,Qe=Ge(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(He,function(r,n,o,s){e.push(o?s.replace(Ue,"$1"):n||r)}),e});function Xe(t){return t==null?"":ot(t)}function D(t,e){return A(t)?t:he(t,e)?[t]:Qe(Xe(t))}function K(t){if(typeof t=="string"||X(t))return t;var e=t+"";return e=="0"&&1/t==-1/0?"-0":e}function qe(t,e){e=D(e,t);for(var r=0,n=e.length;t!=null&&r<n;)t=t[K(e[r++])];return r&&r==n?t:void 0}function Be(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}var pt=w?w.isConcatSpreadable:void 0;function Je(t){return A(t)||ft(t)||!!(pt&&t&&t[pt])}function Ke(t,e,r,n,o){var s=-1,a=t.length;for(r||(r=Je),o||(o=[]);++s<a;){var i=t[s];r(i)?Be(o,i):o[o.length]=i}return o}function Ze(t){var e=t==null?0:t.length;return e?Ke(t):[]}function Ye(t){return Vt(se(t,void 0,Ze),t+"")}function Ve(t,e){return t!=null&&e in Object(t)}function We(t,e,r){e=D(e,t);for(var n=-1,o=e.length,s=!1;++n<o;){var a=K(e[n]);if(!(s=t!=null&&r(t,a)))break;t=t[a]}return s||++n!=o?s:(o=t==null?0:t.length,!!o&&ae(o)&&it(a,o)&&(A(t)||ft(t)))}function tr(t,e){return t!=null&&We(t,e,Ve)}function er(t,e,r,n){if(!M(t))return t;e=D(e,t);for(var o=-1,s=e.length,a=s-1,i=t;i!=null&&++o<s;){var f=K(e[o]),h=r;if(f==="__proto__"||f==="constructor"||f==="prototype")return t;if(o!=a){var c=i[f];h=void 0,h===void 0&&(h=M(c)?c:it(e[o+1])?[]:{})}oe(i,f,h),i=i[f]}return t}function rr(t,e,r){for(var n=-1,o=e.length,s={};++n<o;){var a=e[n],i=qe(t,a);r(i,a)&&er(s,D(a,t),i)}return s}function nr(t,e){return rr(t,e,function(r,n){return tr(t,n)})}var ht=Ye(function(t,e){return t==null?{}:nr(t,e)});class or{constructor(e){this.i=0,this.string=e,this.whitespace=` 	\r
`,this.quotes=`'"`,this.escapes="\\",this.escapedQuotes='"',this.ansiCQuotes=!0,this.localeQuotes=!0,this.debug=!1}readChar(){return this.string.charAt(this.i++)}processEscapes(e,r,n){if(!n&&!this.escapedQuotes.includes(r))return e;const o="["+this.escapes.replace(/(.)/g,"\\$1")+"]";if(!n&&this.escapedQuotes.includes(r)){const s=new RegExp(o+"("+o+"|\\"+r+")","g");return e.replace(s,"$1")}if(n){const s={"([\\\\'\"?])":i=>i,a:()=>"\x07",b:()=>"\b","e|E":()=>"\x1B",f:()=>"\f",n:()=>`
`,r:()=>"\r",t:()=>"	",v:()=>"\v","([0-7]{1,3})":i=>String.fromCharCode(parseInt(i,8)),"x([0-9a-fA-F]{1,2})":i=>String.fromCharCode(parseInt(i,16)),"u([0-9a-fA-F]{1,4})":i=>String.fromCharCode(parseInt(i,16)),"U([0-9a-fA-F]{1,8})":i=>String.fromCharCode(parseInt(i,16)),"c(.)":i=>i==="?"?"":i==="@"?"\0":String.fromCharCode(i.charCodeAt(0)&31)},a=new RegExp(o+"("+Object.keys(s).join("|")+")","g");return e.replace(a,function(i,f){for(const h in s){const c=new RegExp("^"+h+"$").exec(f);if(c!==null)return s[h].apply(null,c.slice(1))}})}}*[Symbol.iterator](){let e=!1,r=!1,n=!1,o=-2,s;for(this.debug&&console.log("full input:",">"+this.string+"<");;){const a=this.i,i=this.readChar();if(this.debug&&console.log("position:",a,"input:",">"+i+"<","accumulated:",s,"inQuote:",e,"inDollarQuote:",r,"lastDollar:",o,"escaped:",n),i===""){if(e)throw new Error("Got EOF while in a quoted string");if(n)throw new Error("Got EOF while in an escape sequence");s!==void 0&&(yield s);return}if(n){i===`
`||(e?s=(s||"")+n+i:s=(s||"")+i),n=!1;continue}if(this.escapes.includes(i)&&(!e||r!==!1||this.escapedQuotes.includes(e))){n=i;continue}if(e!==!1){if(i===e){s=this.processEscapes(s,e,r==="'"),e=!1,r=!1;continue}s=(s||"")+i;continue}if(this.quotes.includes(i)){e=i,o===a-1&&(i==="'"&&!this.ansiCQuotes||i==='"'&&!this.localeQuotes||(r=i)),s=s||"",r!==!1&&(s=s.slice(0,-1));continue}if(e===!1&&i==="$"&&(o=a),this.whitespace.includes(i)){s!==void 0&&(yield s),s=void 0;continue}s=(s||"")+i}}}function sr(t){return Array.from(new or(t))}const ir=t=>{const e={};for(const[,r,n]of t.matchAll(/([a-z])[ \t]*(-?(?:\d+(?:\.\d+)?|\.\d+))?/gi))e[r.toLowerCase()]=n?+n:void 0;return e},ar=t=>{const e={};for(const r of sr(t)){const n=r.indexOf("="),o=r.substring(0,n),s=r.substring(n+1);e[o.toLowerCase()]=s}return e},lr=t=>{const e=t.trim().split(";",2)[0],[,r,n=""]=e.split(/^([gmt]\d+)\s*/i);if(r)return{type:"gcode",command:r.toUpperCase(),args:ir(n)};const[,o,s=""]=e.split(/^(SET_PRINT_STATS_INFO|EXCLUDE_OBJECT_DEFINE|SET_RETRACTION)\s+/i);return o?{type:"macro",command:o.toUpperCase(),args:ar(s)}:{type:"other"}},O=t=>Math.round(t*1e4)/1e4,cr=(t,e)=>{const r=[],n=[],o=[],s=new Set,a=t.split(`
`);let i=!1,f="relative",h="absolute";const c={x:0,y:0,z:0,e:0};let m=0,b=0;const y={length:1,extrudeExtra:0,z:0};for(let E=0;E<a.length;E++){const{type:k,command:I,args:u}=lr(a[E])??{};let l=null;if(k==="macro")switch(I){case"SET_PRINT_STATS_INFO":"current_layer"in u&&(i=!0);break;case"EXCLUDE_OBJECT_DEFINE":if("polygon"in u&&u.polygon){const _={polygon:JSON.parse(u.polygon).map(([G,$])=>({x:G,y:$}))};o.push(_)}break;case"SET_RETRACTION":"retract_length"in u&&(y.length=+u.retract_length),"unretract_extra_length"in u&&(y.extrudeExtra=+u.unretract_extra_length);break}else if(k==="gcode"){switch(I){case"G0":case"G1":{const d=["x","y","z","e"];d.some(_=>_ in u)&&(l={...ht(u,d),tool:m,filePosition:b});break}case"G2":case"G3":{const d=["x","y","z","e","i","j","k","r"];d.some(_=>_ in u)&&(l={...ht(u,d),d:I==="G2"?"clockwise":"counter-clockwise",tool:m,filePosition:b});break}case"G10":l={e:-y.length,tool:m,filePosition:b},y.z!==0&&(l.z=O(c.z+y.z));break;case"G11":l={e:O(y.length+y.extrudeExtra),tool:m,filePosition:b},y.z!==0&&(l.z=O(c.z-y.z));break;case"G28":{const d="x"in u,_="y"in u,G="z"in u,$=!d&&!_&&!G;l={tool:m,filePosition:b},(d||$)&&(l.x=0),(_||$)&&(l.y=0),(G||$)&&(l.z=0);break}case"G90":h="absolute";case"M82":f="absolute",c.e=0;break;case"G91":h="relative";case"M83":f="relative";break;case"G92":f==="absolute"&&(c.e=u.e??c.e),h==="absolute"&&(c.x=u.x??c.x,c.y=u.y??c.y,c.z=u.z??c.z);break;case"M207":y.length=u.s??y.length,y.z=u.z??y.z;break;case"M600":s.add(0),m=(m+1)%10,s.add(m);break;default:I.startsWith("T")&&(m=+I.substring(1),s.add(m));break}if(l){if(f==="absolute"&&l.e!==void 0){const d=O(l.e-c.e);c.e=l.e,l.e=d}if(h==="relative"&&(l.x!==void 0&&(l.x=O(l.x+c.x)),l.y!==void 0&&(l.y=O(l.y+c.y)),l.z!==void 0&&(l.z=O(l.z+c.z))),i&&l.e&&l.e>0){const d=l;if(["x","y","i","j"].some(_=>C(_,d)&&d[_]!==0)){const _={z:c.z,move:r.length-1,filePosition:b};n.push(_),i=!1}}c.x=l.x??c.x,c.y=l.y??c.y,c.z=l.z??c.z,r.push(l)}}E%Math.floor(a.length/100)===0&&e(b),b+=a[E].length+1}return e(b),{moves:r,layers:n,parts:o,tools:[...s].sort((E,k)=>E-k)}},g={fatal:0,error:0,warn:1,log:2,info:3,success:3,fail:3,debug:4,trace:5,verbose:Number.POSITIVE_INFINITY},dt={silent:{level:-1},fatal:{level:g.fatal},error:{level:g.error},warn:{level:g.warn},log:{level:g.log},info:{level:g.info},success:{level:g.success},fail:{level:g.fail},ready:{level:g.info},start:{level:g.info},box:{level:g.info},debug:{level:g.debug},trace:{level:g.trace},verbose:{level:g.verbose}};function Z(t){if(t===null||typeof t!="object")return!1;const e=Object.getPrototypeOf(t);return e!==null&&e!==Object.prototype&&Object.getPrototypeOf(e)!==null||Symbol.iterator in t?!1:Symbol.toStringTag in t?Object.prototype.toString.call(t)==="[object Module]":!0}function Y(t,e,r=".",n){if(!Z(e))return Y(t,{},r);const o=Object.assign({},e);for(const s in t){if(s==="__proto__"||s==="constructor")continue;const a=t[s];a!=null&&(Array.isArray(a)&&Array.isArray(o[s])?o[s]=[...a,...o[s]]:Z(a)&&Z(o[s])?o[s]=Y(a,o[s],(r?`${r}.`:"")+s.toString()):o[s]=a)}return o}function ur(t){return(...e)=>e.reduce((r,n)=>Y(r,n,""),{})}const fr=ur();function pr(t){return Object.prototype.toString.call(t)==="[object Object]"}function hr(t){return!(!pr(t)||!t.message&&!t.args||t.stack)}let V=!1;const gt=[];class p{constructor(e={}){S(this,"options");S(this,"_lastLog");S(this,"_mockFn");const r=e.types||dt;this.options=fr({...e,defaults:{...e.defaults},level:W(e.level,r),reporters:[...e.reporters||[]]},{types:dt,throttle:1e3,throttleMin:5,formatOptions:{date:!0,colors:!1,compact:!0}});for(const n in r){const o={type:n,...this.options.defaults,...r[n]};this[n]=this._wrapLogFn(o),this[n].raw=this._wrapLogFn(o,!0)}this.options.mockFn&&this.mockTypes(),this._lastLog={}}get level(){return this.options.level}set level(e){this.options.level=W(e,this.options.types,this.options.level)}prompt(e,r){if(!this.options.prompt)throw new Error("prompt is not supported!");return this.options.prompt(e,r)}create(e){const r=new p({...this.options,...e});return this._mockFn&&r.mockTypes(this._mockFn),r}withDefaults(e){return this.create({...this.options,defaults:{...this.options.defaults,...e}})}withTag(e){return this.withDefaults({tag:this.options.defaults.tag?this.options.defaults.tag+":"+e:e})}addReporter(e){return this.options.reporters.push(e),this}removeReporter(e){if(e){const r=this.options.reporters.indexOf(e);if(r!==-1)return this.options.reporters.splice(r,1)}else this.options.reporters.splice(0);return this}setReporters(e){return this.options.reporters=Array.isArray(e)?e:[e],this}wrapAll(){this.wrapConsole(),this.wrapStd()}restoreAll(){this.restoreConsole(),this.restoreStd()}wrapConsole(){for(const e in this.options.types)console["__"+e]||(console["__"+e]=console[e]),console[e]=this[e].raw}restoreConsole(){for(const e in this.options.types)console["__"+e]&&(console[e]=console["__"+e],delete console["__"+e])}wrapStd(){this._wrapStream(this.options.stdout,"log"),this._wrapStream(this.options.stderr,"log")}_wrapStream(e,r){e&&(e.__write||(e.__write=e.write),e.write=n=>{this[r].raw(String(n).trim())})}restoreStd(){this._restoreStream(this.options.stdout),this._restoreStream(this.options.stderr)}_restoreStream(e){e&&e.__write&&(e.write=e.__write,delete e.__write)}pauseLogs(){V=!0}resumeLogs(){V=!1;const e=gt.splice(0);for(const r of e)r[0]._logFn(r[1],r[2])}mockTypes(e){const r=e||this.options.mockFn;if(this._mockFn=r,typeof r=="function")for(const n in this.options.types)this[n]=r(n,this.options.types[n])||this[n],this[n].raw=this[n]}_wrapLogFn(e,r){return(...n)=>{if(V){gt.push([this,e,n,r]);return}return this._logFn(e,n,r)}}_logFn(e,r,n){if((e.level||0)>this.level)return!1;const o={date:new Date,args:[],...e,level:W(e.level,this.options.types)};!n&&r.length===1&&hr(r[0])?Object.assign(o,r[0]):o.args=[...r],o.message&&(o.args.unshift(o.message),delete o.message),o.additional&&(Array.isArray(o.additional)||(o.additional=o.additional.split(`
`)),o.args.push(`
`+o.additional.join(`
`)),delete o.additional),o.type=typeof o.type=="string"?o.type.toLowerCase():"log",o.tag=typeof o.tag=="string"?o.tag:"";const s=(i=!1)=>{const f=(this._lastLog.count||0)-this.options.throttleMin;if(this._lastLog.object&&f>0){const h=[...this._lastLog.object.args];f>1&&h.push(`(repeated ${f} times)`),this._log({...this._lastLog.object,args:h}),this._lastLog.count=1}i&&(this._lastLog.object=o,this._log(o))};clearTimeout(this._lastLog.timeout);const a=this._lastLog.time&&o.date?o.date.getTime()-this._lastLog.time.getTime():0;if(this._lastLog.time=o.date,a<this.options.throttle)try{const i=JSON.stringify([o.type,o.tag,o.args]),f=this._lastLog.serialized===i;if(this._lastLog.serialized=i,f&&(this._lastLog.count=(this._lastLog.count||0)+1,this._lastLog.count>this.options.throttleMin)){this._lastLog.timeout=setTimeout(s,this.options.throttle);return}}catch{}s(!0)}_log(e){for(const r of this.options.reporters)r.log(e,{options:this.options})}}function W(t,e={},r=3){return t===void 0?r:typeof t=="number"?t:e[t]&&e[t].level!==void 0?e[t].level:r}p.prototype.add=p.prototype.addReporter,p.prototype.remove=p.prototype.removeReporter,p.prototype.clear=p.prototype.removeReporter,p.prototype.withScope=p.prototype.withTag,p.prototype.mock=p.prototype.mockTypes,p.prototype.pause=p.prototype.pauseLogs,p.prototype.resume=p.prototype.resumeLogs;function dr(t={}){return new p(t)}class gr{constructor(e){S(this,"options");S(this,"defaultColor");S(this,"levelColorMap");S(this,"typeColorMap");this.options={...e},this.defaultColor="#7f8c8d",this.levelColorMap={0:"#c0392b",1:"#f39c12",3:"#00BCD4"},this.typeColorMap={success:"#2ecc71"}}_getLogFn(e){return e<1?console.__error||console.error:e===1?console.__warn||console.warn:console.__log||console.log}log(e){const r=this._getLogFn(e.level),n=e.type==="log"?"":e.type,o=e.tag||"",a=`
      background: ${this.typeColorMap[e.type]||this.levelColorMap[e.level]||this.defaultColor};
      border-radius: 0.5em;
      color: white;
      font-weight: bold;
      padding: 2px 0.5em;
    `,i=`%c${[o,n].filter(Boolean).join(":")}`;typeof e.args[0]=="string"?r(`${i}%c ${e.args[0]}`,a,"",...e.args.slice(1)):r(i,a,...e.args)}}function yr(t={}){return dr({reporters:t.reporters||[new gr({})],prompt(r,n={}){return n.type==="confirm"?Promise.resolve(confirm(r)):Promise.resolve(prompt(r))},...t})}const _r=yr(),mr=t=>{const e={action:"progress",filePosition:t};self.postMessage(e)},vr=(t,e,r,n)=>{const o={action:"result",moves:t,layers:e,parts:r,tools:n};self.postMessage(o)},br=t=>{const e={action:"error",error:t};self.postMessage(e)};self.onmessage=t=>{const e=t.data;try{switch(e.action){case"parse":{const r=new TextDecoder().decode(e.gcode),{moves:n,layers:o,parts:s,tools:a}=cr(r,mr);vr(n,o,s,a);break}}}catch(r){_r.error("[ParseGcode] error in worker",r),br(r)}}})();
